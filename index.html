<!doctype html>
<!--[if lte IE 8]> <html lang="en" class="ie-lte8"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Demo</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="demo/demo.css" rel="stylesheet">
	<link href="src/X-rayHTML.css" rel="stylesheet">

	<!-- Demo Extras! -->
	<link href="src/lib/prism.css" rel="stylesheet">

	<style>
	.btn-xrayhtml-flipsource {
		margin: 0 0 1em;
	}
	.prism code {
		font-size: .8em;
	}
	</style>

</head>
<body>

<div class="header">
	<a href="http://filamentgroup.com/"><h1 id="fg-logo">Filament Group</h1></a>
</div>

<section>

<h1 class="sub">Basics</h1>
<p>By default, functionality is hooked to the <code>data-xrayhtml</code> attribute.</p>

<div class="prism">
<pre><code>&lt;div data-xrayhtml>
	... markup goes here ...
&lt;/div></code></pre>
</div>


<h2>Inline</h2>
<p>Bolting the <code>data-xrayhtml</code> attribute on without a value will give you inline code snippets, like so:</p>

<div data-xrayhtml>
<aside>
	<blockquote>
		<p>It is the unofficial force—the Baker Street irregulars.</p>
	</blockquote>
	<address>Sherlock Holmes</address>
	<cite>Sign of Four</cite>
</aside>
</div>

<h2>Add a subtitle</h2>
<p>Use a heading element with an <code>xraytitle</code> class to add your own subtitle to the example text. An "Example" label preceeds the title you provide.</p>

<div class="prism">
<pre><code>&lt;div data-xrayhtml>
	&lt;h2 class="xraytitle">Parapraph&lt;/h2>
	&lt;p>This is a paragraph with text.&lt;/p>
&lt;/div></code></pre>
</div>

<div data-xrayhtml>
<h2 class="xraytitle">Parapraph</h2>
<p>This is a paragraph with text.</p>
</div>

<h2>Anti-patterns and Bad Examples</h2>
<p>Add <code>class="antipattern"</code> to show a bad example. Also works with subtitles as documented above; instead of "Example", it adds a "Do not use" label.</p>

<div class="prism">
<pre><code>&lt;div data-xrayhtml class="antipattern">
	&lt;h2 class="xraytitle">Non-standard HTML&lt;/h2>
	&lt;text>&lt;code>Text&lt;/code> is not a standard HTML element. Do not use this code.&lt;/text>
&lt;/div></code></pre>
</div>

<div data-xrayhtml class="antipattern">
<h2 class="xraytitle">Non-standard HTML</h2>
<text><code>Text</code> is not a standard HTML element. Do not use this code.</text>
</div>

<h2>Flip</h2>
<p>Setting "flip" as the value of the <code>data-xrayhtml</code> attribute will give you this snazzy flip-to-reveal animation (browsers without support for 3D tranforms will simply show/hide the code snippet).</p>

<div class="prism">
<pre><code>&lt;div data-xrayhtml="flip">
	... markup ...
&lt;/div></code></pre>
</div>

<div data-xrayhtml="flip">
<aside>
	<blockquote>
		<p>It is the unofficial force—the Baker Street irregulars.</p>
	</blockquote>
	<address>Sherlock Holmes</address>
	<cite>Sign of Four</cite>
</aside>
</div>


<h2>iframe</h2>
<p>It's also possible to use an iframe for situations where styles (like media queries) depend on the viewport. Specify the URL for the iframe with <code>data-xrayhtml-iframe="iframe.html"</code> on the <code>data-xrayhtml</code> element. You can also tell XRay where in the iframe page to place the included markup using <code>data-xrayhtml-iframe-target="#replace"</code>. Otherwise it will default to replacing the <code>body</code> HTML with the code XRay code snippet.</p>

<div class="prism">
<pre><code>&lt;div data-xrayhtml data-xrayhtml-iframe="iframe.html" data-xrayhtml-iframe-target="#replace">
	... markup ...
&lt;/div></code></pre>
</div>

<div data-xrayhtml data-xrayhtml-iframe="iframe.html" data-xrayhtml-iframe-target="#replace">
<aside>
	<blockquote>
		<p>It is the unofficial force—the Baker Street irregulars.</p>
	</blockquote>
	<address>Sherlock Holmes</address>
	<cite>Sign of Four</cite>
</aside>
</div>

</section>

<section>

<h1 class="sub">Extras</h1>
<p>The plugin fires off a <code>create.xrayhtml</code> event that can be used to attach features like syntax highlighting (<a href="http://prismjs.com">Prism.js</a>), single-click copying (<a href="https://clipboardjs.com/">Clipboard</a>), or editing in the browser.</p>



<h2>Syntax highlighting (prism.js)</h2>
<p>Add the <code>prism</code> class to the <code>data-xrayhtml</code> container to colorize the code snippet.</p>

<div class="prism">
<pre><code>&lt;div data-xrayhtml class="prism">
	... markup ...
&lt;/div></code></pre>
</div>

<div data-xrayhtml class="prism"><aside>
	<blockquote>
		<p>It is the unofficial force—the Baker Street irregulars.</p>
	</blockquote>
	<address>Sherlock Holmes</address>
	<cite>Sign of Four</cite>
</aside>
</div>



<h2>Copy markup (clipboard.js)</h2>
<p>Add the <code>xray-copy</code> class to the <code>data-xrayhtml</code> container to append a "Copy" button to the code snippet; when clicked, it'll copy the entire snippet.</p>

<div class="prism">
<pre><code>&lt;div data-xrayhtml class="xray-copy">
	... markup ...
&lt;/div></code></pre>
</div>

<h3>With flip</h3>

<div data-xrayhtml="flip" class="xray-copy prism"><aside>
	<blockquote>
		<p>It is the unofficial force—the Baker Street irregulars.</p>
	</blockquote>
	<address>Sherlock Holmes</address>
	<cite>Sign of Four</cite>
	<p>(Copied from the demo page)</p>
</aside>
</div>

<h3>Inline</h3>

<div data-xrayhtml class="xray-copy prism"><aside>
	<blockquote>
		<p>It is the unofficial force—the Baker Street irregulars.</p>
	</blockquote>
	<address>Sherlock Holmes</address>
	<cite>Sign of Four</cite>
	<p>(Copied from the demo page)</p>
</aside>
</div>



<h2>Edit in browser</h2>
<p>Add the <code>xray-edit</code> or <code>xray-edit-inline</code> class to the <code>data-xrayhtml</code> container to allow in-browser editing of the code snippet.</p>
<p>Changes are temporary (undone when the page is refreshed), but can be copied easily when you also add the <code>xray-copy</code> class.</p>

<div class="prism">
<pre><code>&lt;div data-xrayhtml class="xray-edit">
	... markup ...
&lt;/div></code></pre>
</div>

<h3>With flip</h3>

<div data-xrayhtml="flip" class="xray-edit xray-copy prism"><aside>
	<blockquote>
		<p>It is the unofficial force—the Baker Street irregulars.</p>
	</blockquote>
	<address>Sherlock Holmes</address>
	<cite>Sign of Four</cite>
</aside></div>

<h3>Inline</h3>
<p>When editing inline, click the "Refresh Preview" button to refresh the rendered example.</p>

<div data-xrayhtml class="xray-edit-inline xray-copy prism"><aside>
	<blockquote>
		<p>It is the unofficial force—the Baker Street irregulars.</p>
	</blockquote>
	<address>Sherlock Holmes</address>
	<cite>Sign of Four</cite>
</aside></div>


</section>


<script src="src/lib/shoestring.js"></script>
<!-- Or jquery: <script src="src/lib/jquery.js"></script> -->

<script src="src/X-rayHTML.js"></script>

<!-- Demo Extras! -->
<script src="src/lib/prism.js"></script>
<script src="src/lib/clipboard.js"></script>

<script type="text/javascript">
	$( window ).bind( "create.xrayhtml", function( e ) {

		// Prism
		var prism = !!~e.target.getAttribute( "class" ).indexOf( "prism" );

		if ( prism && "Prism" in window ) {
			$( ".prism" ).find( "code" ).addClass( "language-markup" );
			Prism.highlightAll();
		}


		// Clipboard
		var copy = !!~e.target.getAttribute( "class" ).indexOf( "xray-copy" );

		if( copy && "Clipboard" in window ) {
			var $target = $( e.target );
			var $source = $target.find( ".source-panel" );
			var $link = $( "<a href='#' class='btn btn-xray-copy'>copy</a>" );

			// place the link in the source block
			$target.append( $link );

			// set of up the clipboard to use the html
			new Clipboard($link[0], {
				text: function( trigger ){
					return $( trigger ).prev().text();
				}
			});

			// disable the normal link click behavior
			$link.bind( "click", function( e ){ e.preventDefault() });
		};


		// Edit
		var edit = !!~e.target.getAttribute( "class" ).indexOf( "xray-edit" );

		if ( edit ) {
			var $xray = $( e.target );
			var $source = $xray.find( ".source-panel" );

			// for scoping behavior-specific styles
			$xray.addClass( "xray-edit-enhanced" );

			// make the source block editable
			$source.attr( "contenteditable", true );

			var updateXray = function(){
				var newsnippet = $source.find( "pre" ).text();
				$xray.find( ".snippet" ).html( newsnippet );
			};

			// add 'preview' button for inline (non flip) version
			if ( $xray.is( ".xray-edit-inline" ) ) {
				var $previewbtn = $( "<a class='btn btn-small btn-xrayhtml-preview' href='#'>Refresh Preview</a>" );
				$previewbtn.on( "click", function( e ){
					updateXray();
					e.preventDefault();
				});
				$xray.before( $previewbtn );
			}
			// otherwise update when you view the demo
			else {
				if ( $xray.prev().is( ".btn-xrayhtml-flipsource" ) ) {
					$xray.prev().on( "click", updateXray );
				}
			}
		};

	});

</script>

</body>
</html>
